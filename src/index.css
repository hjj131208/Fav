@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* 统一现代化字体与行高 */
  font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.5;
  font-weight: 400;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 全局背景与文字色优化（浅色与暗色） */
html, body {
  background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
  color: #0f172a; /* slate-900 */
}

.dark html, .dark body {
  background: linear-gradient(180deg, #0b1220 0%, #0f172a 100%);
  color: #e5e7eb; /* gray-200 */
}

/* 暗色模式基础样式优化 */
.dark {
  color-scheme: dark;
}

/* 自定义滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #eef2ff; /* indigo-50 */
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #c7d2fe; /* indigo-200 */
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a5b4fc; /* indigo-300 */
}

/* 隐藏滚动条但保留滚动功能 */
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* 平滑过渡动画 - 优化性能 */
.theme-transition {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* 优化主题切换性能 */
* {
  will-change: auto;
}

.dark * {
  will-change: auto;
}

/* 减少重绘的过渡动画 */
.optimized-transition {
  transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
  transform: translateZ(0); /* 启用硬件加速 */
}

/* 跳动动画 */
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* 缩放动画 */
@keyframes pulse-scale {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

/* 分类高亮动画 */
@keyframes highlight {
  0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
  100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

.animate-bounce {
  animation: bounce 0.5s ease-in-out;
}

/* 抖动动画 */
@keyframes shake {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
  75% { transform: rotate(-3deg); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

.animate-pulse-scale {
  animation: pulse-scale 0.5s ease-in-out;
}

/* 移除分类高亮动画效果 */
/* .category-highlight {
  animation: highlight 2s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
} */

/* Tailwind base/components/utilities 已在其他位置引入 */

/* 自定义：向下挤压后弹起（高度基本不变，加入左右轻微倾斜与位移，营造“左跳右跳”）*/
@keyframes press-pop {
  0% {
    transform: scaleY(1) translateY(0) rotate(0deg) translateX(0);
    box-shadow: 0 4px 10px rgba(0,0,0,0.10);
    filter: saturate(1);
  }
  /* 第一次重压（更明显，向左微倾斜） */
  12% {
    transform: scaleY(0.88) translateY(0) rotate(-2deg) translateX(-2px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.14);
    filter: saturate(0.95);
  }
  /* 第一次反弹（更高，向右微倾斜） */
  24% {
    transform: scaleY(1.10) translateY(-2px) rotate(2.5deg) translateX(2px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.10);
    filter: saturate(1.02);
  }
  /* 第二次重压（略弱，向左微倾斜） */
  36% {
    transform: scaleY(0.92) translateY(0) rotate(-1.5deg) translateX(-1px);
  }
  /* 第二次反弹（略弱，向右微倾斜） */
  48% {
    transform: scaleY(1.06) translateY(-1px) rotate(1.8deg) translateX(1px);
  }
  /* 直接一气呵成收束到初始位姿 */
  100% {
    transform: scaleY(1) translateY(0) rotate(0deg) translateX(0);
    box-shadow: 0 4px 10px rgba(0,0,0,0.10);
    filter: saturate(1);
  }
}

/* 工具类：2s，自然出入场，单次播放，填充到结束状态 */
.animate-press-pop {
  animation: press-pop 2s cubic-bezier(0.2, 0.7, 0.3, 1) 1 both;
  transform-origin: bottom center;
}

/* 卡片与按钮的统一风格（不侵入 Tailwind 类，但提供自定义类可复用） */
.ui-card {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: saturate(1.25) blur(6px);
  border-radius: 0.75rem; /* rounded-xl */
  box-shadow: 0 8px 24px rgba(2, 6, 23, 0.08);
  transition: box-shadow 0.2s ease, transform 0.08s ease;
}
.ui-card:hover { box-shadow: 0 12px 28px rgba(2, 6, 23, 0.12); transform: translateY(-1px); }
.dark .ui-card { background: rgba(2, 6, 23, 0.6); }

.ui-button-primary {
  background: linear-gradient(90deg, #4f46e5, #3b82f6);
  color: #ffffff;
  border-radius: 0.75rem;
  box-shadow: 0 6px 20px rgba(79, 70, 229, 0.24);
}
.ui-button-primary:hover { filter: brightness(1.05); }
.ui-button-primary:active { transform: scale(0.98); }

@media (max-width: 400px) {
  :root {
    font-size: 60%; /* 手机端整体按比例缩小至 60%（基于 rem 的尺寸全部跟随） */
  }
  html {
    font-size: 60%; /* 兼容性保障：部分浏览器以 html 作为 rem 参考 */
  }
  /* 移动端弹出分类栏：宽度按 60% 缩小（原 200px -> 120px） */
  .mobile-sidebar {
    width: 120px !important;
  }
}